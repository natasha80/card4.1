(()=>{"use strict";const t=[{name:"amex",startWith:[34,37]},{name:"visa",startWith:[4]},{name:"master",startWith:[51,52,53,54,55]},{name:"discover",startWith:[60]},{name:"jcb",startWith:[31,35]},{name:"diners_club",startWith:[30,36,38]},{name:"mir",startWith:[2]}];const e=new class{constructor(){this.drawWidget()}drawWidget(){this.widgetBlock=document.createElement("div"),this.widgetBlock.classList.add("widget-card-validation"),this.widgetBlock.innerHTML='<ul class="card-list">\n                                    <li class="card-item visa">\n                                      <span class="card">Visa</span>\n                                    </li>\n                                    <li class="card-item master">\n                                      <span class="card">Mastercard</span>\n                                    </li>\n                                    <li class="card-item amex">\n                                      <span class="card">American Express</span>\n                                    </li>\n                                    <li class="card-item discover">\n                                      <span class="card">Discover</span>\n                                    </li>\n                                    <li class="card-item jcb">\n                                      <span class="card">JCB</span>\n                                    </li>\n                                    <li class="card-item diners_club">\n                                      <span class="card">Diners Club</span>\n                                    </li>\n                                    <li class="card-item mir">\n                                      <span class="card">MIR</span>\n                                    </li>\n                                  </ul>\n                                  <form class="form">\n                                    <div class="form-block error-validate">\n                                      <input class="input-number-card" type="text" placeholder="Credit card number">\n                                      <div class="error">\n                                        <span class="error-text">номер введенной карты неверный</span>\n                                      </div>  \n                                    </div>\n                                    <div class="form-block">\n                                      <button class="button-validate">Check to Validate</button>\n                                    </div>\n                                  </form>',this.form=this.widgetBlock.querySelector(".form"),this.input=this.widgetBlock.querySelector(".input-number-card"),this.button=this.widgetBlock.querySelector(".button-validate"),this.error=this.widgetBlock.querySelector(".error"),document.body.appendChild(this.widgetBlock)}addError(){this.error.classList.add("active")}removeError(){this.error.classList.remove("active")}};new class{constructor(e=null){this.widget=e,this.dataCreditSystem=t,this.checkBindingDOM()}addListeners(){document.addEventListener("click",(t=>{t.target.closest(".button-validate")&&(t.preventDefault(),this.widget.removeError(),this.checkInput(),this.widget.input.blur(),this.widget.form.reset())})),this.widget.input.addEventListener("keydown",(t=>{"Enter"===t.code&&this.widget.button.click()}))}allItemDisactive(){for(const t of this.cartCollection)t.classList.add("disactive")}allItemActive(){for(const t of this.cartCollection)t.classList.remove("disactive")}activeCart(t){document.querySelector(`.${t}`).classList.remove("disactive")}checkInput(){if(!this.checkValidity(this.widget.input.value))return this.widget.addError(),void this.allItemActive();const t=this.belongToCreditSystem(this.widget.input.value);null!==t?(this.allItemDisactive(),this.activeCart(t)):this.allItemActive()}checkValidity(t){let e=0;const i=String(t).replace(/\D/g,""),s=i.length%2!=0;if(""===i)return!1;for(let t=0;t<i.length;t++){let r=parseInt(i[t],10);e+=(0|s)==t%2&&(r*=2)>9?r-9:r}return e%10==0}belongToCreditSystem(t){const e=String(t);for(const t of this.dataCreditSystem){if(t.startWith.find((t=>e.startsWith(String(t)))))return t.name}return null}checkBindingDOM(){null!==this.widget&&(this.cartCollection=document.querySelectorAll(".card-item"),this.addListeners())}}(e)})();